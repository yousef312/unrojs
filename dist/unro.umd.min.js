!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).unro=e()}(this,function(){"use strict";const t=["clearpath","insertion","lineare"],e=new Map;let i=0;function s(e,i){this.stack=[],this.current=-1,this.maximum="number"==typeof e?e:100,this.algo=t.includes(i)?i:"clearpath"}return Array.prototype.insert=function(t,e){var i,s,r;return this.splice((i=e,s=0,r=this.length,i<s?s:i>r?r:i),0,t),e},s.prototype={push:function(t,s){if(!t||"function"!=typeof t.undo||"function"!=typeof t.redo)return console.error("[UnroJS] wrong stack defintion in .push, a stack must have undo & redo functins");e.set(t,{state:null,id:++i});let r=this.current;return"lineare"===this.algo?this.current=this.stack.push(elm)-1:"clearpath"===this.algo?(void 0!==this.stack[r+1]&&this.stack.splice(r+1,this.stack.length).forEach(t=>e.delete(t)),this.current=this.stack.push(elm)-1):"insertion"===this.algo&&(this.current=this.stack.insert(elm,r+1)),this.stack.length>this.maximum?(this.stack.shift(),this.current=r):!0===s&&(this.current--,this.redo()),this.current},undo:function(){if(this.stack[this.current-1])return this.current--,this.stack[this.current].undo.call(this),this},redo:function(){if(this.stack[this.current+1])return this.current++,this.stack[this.current].redo.call(this),this},expand:function(t){return this.maximum="number"==typeof t?t:this.maximum,this},freeUp:function(){return this.stack=[],e.clear(),this.current=0,this},moveTo:function(t){if(t===this.current)return"current";if(this.stack[t]){if(t>this.current)for(let e=this.current+1;e<=t;e++)this.current=e,this.stack[e].redo.call(this);else for(let e=this.current;e>=t;e--)this.current=e,this.stack[e].undo.call(this);return this.current=t,this.stack[t]}return"out-of-range"},setAlgorithme:function(e){return!!t.includes(e)&&(this.algo=e,!0)},save:function(t){e.get(this.stack[this.current]).state=t},load:function(){return e.get(this.stack[this.current]).state}},window.Unro=s,s});
//# sourceMappingURL=unro.umd.min.js.map
