{"version":3,"file":"unro.cjs.js","sources":["../src/unro.js"],"sourcesContent":["const algos = ['clearpath', 'insertion', 'lineare'];\r\n\r\nconst dfn = () => { } // dfn stands for Default function\r\nlet counter = 0;\r\nconst clamp = (v, min, max) => v < min ? min : v > max ? max : v;\r\nArray.prototype.insert = function (elm, index) {\r\n    this.splice(clamp(index, 0, this.length), 0, elm);\r\n    return index;\r\n}\r\n\r\n/**\r\n * @typedef {Object} StackDef\r\n * @property {function} undo called when user is attempting to undo action\r\n * @property {function} redo called when user is attempting to redo action\r\n * @property {function} init called to auto create a stack\r\n * @property {CanvasRenderingContext2D} renderer2D attach a ctx to activate the canvas copy/paste feature\r\n * @property {string} label helps identifiy the stack action\r\n * @property {Date} date the stack action date\r\n */\r\n\r\n/**\r\n * Simple integration of undo/redo functionalities\r\n * @author Yousef Neji\r\n */\r\nclass Unro {\r\n    /**\r\n     * The stacks container\r\n     * @type {Array<Stack>}\r\n     */\r\n    #stack = [];\r\n\r\n    /**\r\n     * Last action performed\r\n     * @type {\"undo\" | \"redo\"}\r\n     */\r\n    #last = null;\r\n\r\n    /**\r\n     * Holds a state of whether all stacks are done or not\r\n     * @type {boolean}\r\n     */\r\n    #alldone = false;\r\n\r\n    /**\r\n     * Holds a state of whether all stacks are undone or not\r\n     * @type {boolean}\r\n     */\r\n    #allundone = false;\r\n\r\n    constructor() {\r\n\r\n        /**\r\n         * Current stack/state index \r\n         * @type {number} \r\n         */\r\n        this.current = -1;\r\n\r\n        /**\r\n         * Maximum number of stacks that can be held.\r\n         * @type {number}\r\n         */\r\n        this.maximum = 100;\r\n\r\n        /**\r\n         * The algorithme to use when stacking, or the stacking method, may be one of those:\r\n         *  - `clearpath` : once you undo and push new stack the forward stacks will be removed.\r\n         *  - `insertion` : once you undo and push new stack the new one will be inserted in front of the forward stacks.\r\n         *  - `lineare` : once you push new stack it will be always added to the end of the stacks list.\r\n         * \r\n         * by defaults its `clearpath`\r\n         * @type {string}\r\n         */\r\n        this.algo = \"clearpath\";\r\n    }\r\n\r\n\r\n    get lastAction(){\r\n        return this.#last;\r\n    }\r\n\r\n    get isFirstStack(){\r\n        return this.#allundone === true;\r\n    }\r\n\r\n    get isLastStack(){\r\n        return this.#alldone === true;\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * Push new stack/state into the stacks list, and directly execute unless\r\n     * you set `dontExecute` as true.\r\n     * @method Unro#push\r\n     * @param {StackDef} stackdef\r\n     * @returns {number} the current state index\r\n     */\r\n    push(stackdef) {\r\n        if (!stackdef || stackdef.toString() !== '[object Object]') return;\r\n        let stack = new Stack(stackdef);\r\n        if (typeof stackdef.init === \"function\") {\r\n            stackdef.init(stack);\r\n\r\n            if (!stack.isReady) throw new Error(`[UnroJS] the .init function not well constructed`);\r\n        } else if (typeof stackdef.undo != \"function\" || typeof stackdef.redo != \"function\")\r\n            throw new Error(`[UnroJS] wrong stack defintion in .push, a stack must have undo & redo or init functions`);\r\n\r\n        // let's prepare the stack state storage\r\n        let oldIndex = this.current;\r\n\r\n        if (this.algo === 'lineare')\r\n            this.current = this.#stack.push(stack) - 1;\r\n        else if (this.algo === 'clearpath') {\r\n            if (this.#stack[oldIndex + 1] !== undefined)\r\n                this.#stack.splice(oldIndex + 1, this.#stack.length);\r\n            this.current = this.#stack.push(stack) - 1;\r\n        } else if (this.algo === 'insertion') {\r\n            this.current = this.#stack.insert(stack, oldIndex + 1);\r\n        }\r\n\r\n        // respect maximum term\r\n        if (this.#stack.length > this.maximum) {\r\n            this.#stack.shift();\r\n            this.current = oldIndex;\r\n        }\r\n\r\n        return this.current;\r\n    }\r\n    /**\r\n     * Undo the last change or state/stack\r\n     * @method Unro#undo\r\n     * @returns {Unro}\r\n     */\r\n    undo() {\r\n        if(this.#allundone) return;\r\n\r\n        this.#stack[this.current].undo(this);\r\n        if (this.#stack[this.current - 1])\r\n            this.current--;\r\n        else this.#allundone = true;\r\n\r\n        this.#last = \"undo\";\r\n        this.#alldone = false;\r\n        return this;\r\n    }\r\n    /**\r\n     * Redo the last change or state/stack\r\n     * @method Unro#redo\r\n     * @returns {Unro}\r\n     */\r\n    redo() {\r\n        if (this.#stack[this.current + 1])\r\n            this.current++;\r\n        else return this.#alldone = true;\r\n        \r\n        this.#stack[this.current].redo(this);\r\n        this.#last = \"redo\";\r\n        this.#allundone = false;\r\n        return this;\r\n    }\r\n    /**\r\n     * Expand the stack maximum length\r\n     * @method Unro#expand\r\n     * @param {number} value\r\n     * @returns {Unro}\r\n     */\r\n    expand(value) {\r\n        this.maximum = typeof value == \"number\" ? value : this.maximum;\r\n        return this\r\n    }\r\n    /**\r\n     * Clear/reset the stack content\r\n     * @method Unro#free\r\n     * @returns {Unro}\r\n     */\r\n    free() {\r\n        this.#stack = [];\r\n        this.current = 0;\r\n        return this\r\n    }\r\n    /**\r\n     * Move to a specified stack, the function will execute all stack up to \r\n     * the one requested, and return either the stack or:\r\n     *  - `out-of-range`: when requested stack index doesn't exists\r\n     *  - `current`: if requested stack is the current one\r\n     * @method Unro#moveTo\r\n     * @param {number} i \r\n     * @returns {string} the wanted stack content or the string `out-of-rang`\r\n     */\r\n    moveTo(i) {\r\n        if (i === this.current) return 'current';\r\n        if (this.#stack[i]) {\r\n            // you can't just jump from age 20 to 55\r\n            // you must go through all between\r\n            // the same happens here\r\n            if (i > this.current)\r\n                for (let j = this.current + 1; j <= i; j++) {\r\n                    this.current = j; // required for state functionality\r\n                    this.#stack[j].redo(this); // redoing the stack\r\n                }\r\n            else\r\n                for (let j = this.current; j >= i; j--) {\r\n                    this.current = j; // required for state functionality\r\n                    this.#stack[j].undo(this); // undoing the stack\r\n                }\r\n\r\n            this.current = i;\r\n            return this.#stack[i];\r\n        } else return 'out-of-range';\r\n    }\r\n    /**\r\n     * Change the `algo` property value, available options are:\r\n     *  - `clearpath` : once you undo and push new stack the forward stacks will be removed.\r\n     *  - `insertion` : once you undo and push new stack the new one will be inserted in front of the forward stacks.\r\n     *  - `lineare` : once you push new stack it will be always added to the end of the stacks list.\r\n     * @method Unro#setAlgorithme\r\n     * @param {string} algo \r\n     * @returns {boolean}\r\n     */\r\n    setAlgorithme(algo) {\r\n        if (algos.includes(algo)) {\r\n            this.algo = algo;\r\n            return true\r\n        }\r\n        return false\r\n    }\r\n\r\n    /**\r\n     * Creates a JSON stack action string \r\n     * @method Unro#exportStackActions\r\n     * @returns {string}\r\n     */\r\n    exportStackActions() {\r\n        let stacks = [];\r\n        this.#stack.forEach(stk => stacks.push({ action: stk.label, date: stk.date }));\r\n        return JSON.stringify({ stacks });\r\n    }\r\n\r\n    /**\r\n     * Acquire a shortcut library functionality such as qway.js, binding certain pattern as follow:\r\n     *  - `a`: ctrl+z => undo ctrl+y => redo\r\n     *  - `b`: ctrl+z => undo ctrl+shift+z => redo\r\n     * @method Unro#integrate\r\n     * @param {Object} accelLib \r\n     * @param {\"a\" | \"b\"} pattern \r\n     */\r\n    acquire(accelLib, pattern) {\r\n        if (accelLib.bind) {\r\n            let _this = this;\r\n            let undo = 'ctrl+w',\r\n                redo = 'ctrl+y';\r\n            if (pattern == \"b\") {\r\n                undo = 'ctrl+w';\r\n                redo = 'ctrl+shift+y';\r\n            }\r\n\r\n            accelLib.bind(undo, function () {\r\n                _this.undo();\r\n            })\r\n            accelLib.bind(redo, function () {\r\n                _this.redo();\r\n            })\r\n        }\r\n    }\r\n\r\n    /**\r\n     * The length of the current stack\r\n     * @type {number}\r\n     */\r\n    get len() {\r\n        return this.#stack.length;\r\n    }\r\n}\r\n\r\nclass Stack {\r\n    #undo = dfn;\r\n    #redo = dfn;\r\n    /**\r\n     * Provider of render from/to canvas feature\r\n     * @type {CanvasRenderingContext2D}\r\n     */\r\n    #renderer2D = null;\r\n    /**\r\n     * Canvas stack when using render from/to feature\r\n     * @type {Array<CanvasRenderingContext2D>}\r\n     */\r\n    #ctxStack = null;\r\n    #state = null;\r\n    /**\r\n     * Used for canvas copy/paste to check whether the stack is ready or not\r\n     * @type {boolean}\r\n     */\r\n    #ready = false;\r\n    #id = ++counter;\r\n\r\n    /**\r\n     * \r\n     * @param {StackDef} def \r\n     */\r\n    constructor(def) {\r\n        this.#undo = def.undo;\r\n        this.#redo = def.redo;\r\n        this.date = new Date();\r\n        this.label = def.label;\r\n        if (def.renderer2D instanceof CanvasRenderingContext2D || def.renderer2D instanceof OffscreenCanvasRenderingContext2D) {\r\n            this.#renderer2D = def.renderer2D;\r\n            this.#ctxStack = [];\r\n        }\r\n    }\r\n\r\n    get undo() {\r\n        return this.#undo;\r\n    }\r\n\r\n    get redo() {\r\n        return this.#redo;\r\n    }\r\n\r\n    get isReady() {\r\n        return this.#ready;\r\n    }\r\n\r\n    get id() {\r\n        return this.#id\r\n    }\r\n\r\n    save(data) {\r\n        if (data != undefined)\r\n            this.#state = data;\r\n    }\r\n    load() {\r\n        return this.#state;\r\n    }\r\n    copy() {\r\n        if (!this.#renderer2D)\r\n            throw new Error(`[UnroJS] Define .renderer2D in order to use canvas copy/paste features.`);\r\n\r\n        if (this.#ctxStack.length <= 2) {\r\n            let ctx = new OffscreenCanvas(this.#renderer2D.canvas.width, this.#renderer2D.canvas.height).getContext('2d');\r\n            ctx.drawImage(this.#renderer2D.canvas, 0, 0);\r\n            this.#ctxStack.push(ctx);\r\n\r\n            if (this.#ctxStack.length == 2) {\r\n                this.#ready = true;\r\n                // auto construct\r\n                let oldUndo = this.#undo;\r\n                let oldRedo = this.#redo;\r\n                this.#undo = function () {\r\n                    this.paste('undo');\r\n                    if (typeof oldUndo === \"function\") oldUndo();\r\n                }\r\n                this.#redo = function () {\r\n                    this.paste('redo');\r\n                    if (typeof oldRedo === \"function\") oldRedo();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    paste(step) {\r\n        if (!this.#renderer2D)\r\n            throw new Error(`[UnroJS] Define .renderer2D in order to use canvas copy/paste features.`);\r\n\r\n        // getting canvas stack\r\n        let ctx = this.#ctxStack[[1, \"undo\"].includes(step) ? 0 : [2, \"redo\"].includes(step) ? 1 : -1];\r\n        if (!ctx) throw new Error(`[UnroJS] Unknown \"step\" in .paste \"${step}\"`);\r\n        // displaying it\r\n        this.#renderer2D.clearRect(0, 0, this.#renderer2D.canvas.width, this.#renderer2D.canvas.height);\r\n        this.#renderer2D.drawImage(ctx.canvas, 0, 0);\r\n    }\r\n}\r\n\r\n\r\nfunction unro() {\r\n    return new Unro();\r\n}\r\n\r\nwindow.unro = unro;\r\nexport default unro;"],"names":[],"mappings":"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"}